<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>5_vali</title>
    <style>
        table{width:700px}
        /*父元素下的第1个，第n个，最后一个td子元素*/
        td:first-child{width:60px}
        /*IE不支持nth-child*/
        td:nth-child(2){width:200px}
        /*IE*/
        td:first-child+td{width:200px}
        /*IE不支持--可以靠总宽度来调节
        td:last-child{width:340px}*/
        td span{color:red}

        .vali_info{/* 页面初始，验证消息不显示 */
            display:none;
        }
        .txt_focus{/*当文本框获得焦点时穿上*/
            border-top:2px solid black;
            border-left:2px solid black;
        }/*当文本框失去焦点时脱下*/

        .vali_success,.vali_fail{
            background-repeat:no-repeat;
            background-position:left center;
            display:block;
        }
        /* 验证消息：验证通过时的样式 */
        .vali_success{
            background-image:url("images/ok.png");
            padding-left:20px;
            width:0px;height:20px;
            overflow:hidden;
        }
        /* 验证消息：验证失败时的样式 */
        .vali_fail{
            background-image:url("images/err.png");
            border:1px solid red;
            background-color:#ddd;
            color:Red;
            padding-left:30px;
        }
    </style>
</head>
<body>
    <form id="form1">
		<h2>增加管理员</h2>
		<table>
			<tr>
				<td>姓名：</td>
                <td>
					<input name="username"/>
					<span>*</span>
				</td>
				<td>
					<div class="vali_info">
						10个字符以内的字母、数字或下划线的组合
					</div>
				</td>
			</tr>
			<tr>
				<td>密码：</td>
				<td>
					<input type="password" name="pwd"/>
					<span>*</span>
				</td>
				<td>
					<div class="vali_info">6位数字</div>
				</td>
			</tr>
			<tr>
				<td></td>
				<td colspan="2">
                    <input type="submit" value="保存"/>
                    <input type="reset" value="重填"/>
				</td>
			</tr>				
	    </table>
	</form>
<script>
    var unameInput=document.getElementsByName("username")[0];
    var pwdInput=document.getElementsByName("pwd")[0];
    
    unameInput.onfocus=pwdInput.onfocus=function(){
        var div=this.parentNode.nextElementSibling.firstElementChild;
        div.className="";
    }
    unameInput.onblur=function(){
        var reg1=/^\w{1,10}$/;
        vali(this,reg1);
    }
    pwdInput.onblur=function(){
        var reg2=/^\d{6}$/;
        vali(this,reg2);
    }
    //封装验证函数
    function vali(_this,reg){
        var div=_this.parentNode.nextElementSibling.firstElementChild;
        var bool=reg.test(_this.value);
        if(bool){
            div.className="vali_success";
        }else{
            div.className="vali_fail";
        }
    }
</script>
</body>
</html>